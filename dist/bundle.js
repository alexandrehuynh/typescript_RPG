(()=>{"use strict";const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let t;const n=new Uint8Array(16);function r(){if(!t&&(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(n)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));const a=function(t,n,a){if(e.randomUUID&&!n&&!t)return e.randomUUID();const o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){a=a||0;for(let e=0;e<16;++e)n[a+e]=o[e];return n}return function(e,t=0){return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}(o)},o=class{constructor(e,t,n){this.offenseMoves=[],this.defenseMoves=[],this.experiencePoints=0,this.id=a(),this.name=e,this._nation=t,this.bendingStyle=n}get nation(){return this._nation}set nation(e){if(!["Earth Kingdom","Water Tribes","Air Temples","Fire Nation","Republic City"].includes(e))throw new Error("Invalid nation.");this._nation=e}learnOffenseMove(e){this.offenseMoves.push(e)}forgetOffenseMove(e){this.offenseMoves=this.offenseMoves.filter((t=>t.name!==e))}learnDefenseMove(e){this.defenseMoves.push(e)}forgetDefenseMove(e){this.defenseMoves=this.defenseMoves.filter((t=>t.name!==e))}attack(){console.log(`${this.name} attacks with ${this.offenseMoves.map((e=>e.attack())).join(", ")}`)}defend(){console.log(`${this.name} defends with ${this.defenseMoves.map((e=>e.defend())).join(", ")}`)}};class i extends o{constructor(e,t,n,r,s){super(e,t,n),this.offenseMoves=r,this.defenseMoves=s}static getInstance(e,t,n,r,s){return i.instance?console.error("There can only be one Avatar."):i.instance=new i(e,t,n,r,s),i.instance}}i.instance=null;const c=i,d=class extends o{constructor(e,t,n,r){super(e,t,"Airbending"),this.offenseMoves=n,this.defenseMoves=r}},l=class extends o{constructor(e,t,n,r){super(e,t,"Earthbending"),this.offenseMoves=n,this.defenseMoves=r}},u=class extends o{constructor(e,t,n,r){super(e,t,"Firebending"),this.offenseMoves=n,this.defenseMoves=r}},h=class extends o{constructor(e,t,n,r){super(e,t,"Waterbending"),this.offenseMoves=n,this.defenseMoves=r}},p=class extends o{constructor(e,t,n,r){super(e,t,"Non-Bender"),this.offenseMoves=n,this.defenseMoves=r}},m=class{static displayCharacter(e,t){console.log("Attempting to display character:",e);const n=document.getElementById(t);if(!n)return void console.error("Container not found for ID:",t);console.log(`Found container for ID ${t}`,n);const r=this.createCharacterCard(e);n.innerHTML="",n.appendChild(r)}static createCharacterCard(e){const t=document.createElement("div");return t.className="character-card",t.innerHTML=`\n            <h2>${e.name}</h2>\n            <p>Nation: ${e.nation}</p>\n            <p>Bending Style: ${e.bendingStyle}</p>\n            <p>Abilities: ${e.offenseMoves.map((e=>e.name)).join(", ")} / ${e.defenseMoves.map((e=>e.name)).join(", ")}</p>\n        `,t}static displayCharacters(e,t){const n=document.getElementById(t);n&&(n.innerHTML="",e.forEach((e=>{const t=this.createCharacterCard(e);n.appendChild(t)})))}static updateCharacterCard(e,t){const n=e.querySelector("h2"),r=e.querySelector("p.nation"),s=e.querySelector("p.bendingStyle"),a=e.querySelector("p.offenseMoves"),o=e.querySelector("p.defenseMoves");n&&(n.textContent=t.name),r&&(r.textContent=`Nation: ${t.nation}`),s&&(s.textContent=`Bending Style: ${t.bendingStyle}`),a&&(a.textContent=`Offense Moves: ${t.offenseMoves.map((e=>e.name)).join(", ")}`),o&&(o.textContent=`Defense Moves: ${t.defenseMoves.map((e=>e.name)).join(", ")}`)}},g=class{constructor(){this.characters=[],this.charactersInDOM=new Map}addCharacter(e){this.characters.push(e),this.renderCharacters()}removeCharacter(e){this.characters=this.characters.filter((t=>t.name!==e))}updateCharacter(e,t){const n=this.characters.findIndex((t=>t.name===e));if(-1!==n){const e=this.characters[n];void 0!==t.nation&&(e.nation=t.nation),void 0!==t.name&&(e.name=t.name),void 0!==t.bendingStyle&&(e.bendingStyle=t.bendingStyle),void 0!==t.offenseMoves&&(e.offenseMoves=t.offenseMoves),void 0!==t.defenseMoves&&(e.defenseMoves=t.defenseMoves)}else console.warn(`Character with name ${e} not found.`)}renderCharacters(){const e=document.getElementById("characters-container");if(!e)return void console.error("Characters container not found");const t=document.createDocumentFragment(),n=new Map;this.characters.forEach((e=>{let r=this.charactersInDOM.get(e.id);r?m.updateCharacterCard(r,e):(r=m.createCharacterCard(e),t.appendChild(r)),n.set(e.id,r)})),this.charactersInDOM.forEach(((e,t)=>{n.has(t)||e.remove()})),e.appendChild(t),this.charactersInDOM=n}};function f(e){return"attack"in e}function v(e){return"defend"in e}class b{constructor(e,t,n){this.id=a(),this.name=e,this.damagePoints=t,this.description=n}attack(){return`${this.name} attacks with ${this.damagePoints} damage points, ${this.description}`}}class y{constructor(e,t,n){this.id=a(),this.name=e,this.damagePoints=t,this.description=n}defend(){return`${this.name} defends with ${this.damagePoints} protection, ${this.description}`}}var w,S;let C=null;const E=new g,M={Airbender:["Air Slices","Vacuum Sphere","Sonic Boom"],Earthbender:["Rock Bullets","Lavabending","Seismic Sense"],Firebender:["Fire Jets","Lightning Generation","Combustion Blast"],Waterbender:["Ice Spears","Water Whip","Bloodbending"],Nonbender:["Electrified Gloves","Mecha Suit","Swords And Boomerang"],Avatar:["Air Slices","Vacuum Sphere","Sonic Boom","Rock Bullets","Lavabending","Seismic Sense","Fire Jets","Lightning Generation","Combustion Blast","Ice Spears","Water Whip","Bloodbending"]},B={Airbender:["Air Shield","Flight","Spiritual Projection"],Earthbender:["Earth Wall","Metal Armor","Sand Cloud"],Firebender:["Fire Shield","Heat Control","Lightning Redirection"],Waterbender:["Healing Waters","Spirit Bending","Water Shield"],Nonbender:["Chi Blocking","Back Up","Distractions"],Avatar:["Air Shield","Flight","Spiritual Projection","Earth Wall","Metal Armor","Sand Cloud","Fire Shield","Heat Control","Lightning Redirection","Healing Waters","Spirit Bending","Water Shield"]},k={"Air Slices":new class extends b{constructor(){super("Air Slices",45,"Sends out razor-sharp focused slices of air, cutting through obstacles and enemies alike.")}},"Vacuum Sphere":new class extends b{constructor(){super("Vacuum Sphere",65,"Generates a sphere of vacuum around the target, disrupting their balance and breathing to incapacitate opponents.")}},"Sonic Boom":new class extends b{constructor(){super("Sonic Boom",75,"Generate a powerful shockwave with a swift airbending motion, knocking back opponents and causing structural damage.")}},"Rock Bullets":new class extends b{constructor(){super("Rock Bullets",50,"Rapid-fire a barrage of rock bullets at high speed, capable of penetrating defenses.")}},Lavabending:new class extends b{constructor(){super("Lavabending",70,"Creates and manipulates streams of lava, overwhelming opponents with molten rock.")}},"Seismic Sense":new class extends b{constructor(){super("Seismic Sense",40,"Senses and anticipates opponent's moves by detecting vibrations through the ground.")}},"Fire Jets":new class extends b{constructor(){super("Fire Jets",60,"Unleashes continuous streams of fire from any extremities, scorching enemies within range.")}},"Lightning Generation":new class extends b{constructor(){super("Lighting Generation",80,"Generates a bolt of lightning, striking with precision and deadly force.")}},"Combustion Blast":new class extends b{constructor(){super("Combustion Blast",90,"Concentrates energy into a single point, resulting in a devastating explosion on impact.")}},"Ice Spears":new class extends b{constructor(){super("Ice Spears",50,"Launches sharp projectiles of ice towards enemies, capable of piercing through defenses.")}},"Water Whip":new class extends b{constructor(){super("Water Whip",30,"Creates a flexible, powerful lash of water to strike opponents from a distance.")}},Bloodbending:new class extends b{constructor(){super("Bloodbending",80,"Manipulates the water in an opponent's body, controlling them against their will.")}},"Air Shield":new class extends y{constructor(){super("Air Shield",65,"forms a swirling dome of air around the bender, offering protection from all directions.")}},Flight:new class extends y{constructor(){super("Flight",70,"takes to the skies, evading ground-based attacks and gaining a tactical advantage.")}},"Spiritual Projection":new class extends y{constructor(){super("Spiritual Projectionsd",55,"separates the spirit from the body, allowing for reconnaissance and escape from physical confines.")}},"Earth Wall":new class extends y{constructor(){super("Earth Wall",80,"summons a solid wall of earth to block incoming attacks.")}},"Metal Armor":new class extends y{constructor(){super("Metal Armor",75,"forms a protective layer of metal armor, enhancing defense against physical and bending attacks.")}},"Sand Cloud":new class extends y{constructor(){super("Sand Cloud",60,"engulfs the area in a cloud of sand, impairing visibility and disorienting foes.")}},"Fire Shield":new class extends y{constructor(){super("Fire Shield",70,"encircles oneself with a shield of fire, deterring close combat and burning incoming projectiles")}},"Heat Control":new class extends y{constructor(){super("Heat Control",60,"controls the ambient heat to nullify fire-based attacks and reduce their damage.")}},"Lightning Redirection":new class extends y{constructor(){super("Lightning Redirection",85,"channels and redirects the flow of lightning, safely away from oneself and potentially back at the attacker.")}},"Healing Waters":new class extends y{constructor(){super("Healing Waters",65,"channels healing energies through water, mending wounds and restoring vitality.")}},"Spirit Bending":new class extends y{constructor(){super("Spirit Bending",70,"uses waterbending to harmonize or disrupt spiritual energy, offering protection against spiritual threats.")}},"Water Shield":new class extends y{constructor(){super("Water Shield",75,"summons a swirling barrier of water around the bender, deflecting incoming attacks and protecting against harm.")}},"Mecha Suit":new class extends b{constructor(){super("Mecha Suit",70,"Unleashes the full firepower of the mecha suit, targeting opponents with electric shocker and grappling cables.")}},"Swords And Boomerang":new class extends b{constructor(){super("Swords and Boomerang",45,"Masterfully engages with swords for close combat and a trusty boomerang for timely attacks.")}},"Electrified Gloves":new class extends b{constructor(){super("Electrified Gloves",50,"Strikes with electrified gloves, delivering a high-voltage shock to opponents.")}},"Chi Blocking":new class extends y{constructor(){super("Chi Blocking",65,"employs precise strikes to chi points, temporarily paralyzing opponents and neutralizing bending abilities.")}},Backup:new class extends y{constructor(){super("Backup",60,"summons allies for assistance, bolstering defense and counterattack capabilities.")}},Distractions:new class extends y{constructor(){super("Distractions",45,"creates a momentary distraction, providing an opportunity to dodge or counter.")}},"Avatar State Defense":new class extends y{constructor(){super("Avatar State",100,"surrounds the Avatar with a protective barrier of all four elements, deflecting and neutralizing incoming attacks.")}},"Avatar State Offense":new class extends b{constructor(){super("Avatar State",100,"Enter the Avatar State to harnesses the power of all previous Avatars, launching a devastating multi-elemental attack.")}}};function x(e){const t=document.getElementById("nation");t?(t.innerHTML="",({Airbender:["Air Temples","Republic City"],Earthbender:["Earth Kingdom","Republic City"],Firebender:["Fire Nation","Republic City"],Waterbender:["Water Tribes","Republic City"],Nonbender:["Republic City","Earth Kingdom","Fire Nation","Air Temples","Water Tribes"],Avatar:["Republic City","Earth Kingdom","Fire Nation","Air Temples","Water Tribes"]}[e]||[]).forEach((e=>{const n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)}))):console.error("nation select element not found")}function A(e,t,n,r,s){console.log(`Handling character selection - Name: ${e}, Nation: ${t}, Bending Style: ${n}`);let a=null;switch(n){case"Airbender":a=new d(e,t,r,s);break;case"Earthbender":a=new l(e,t,r,s);break;case"Firebender":a=new u(e,t,r,s);break;case"Waterbender":a=new h(e,t,r,s);break;case"Nonbender":a=new p(e,t,r,s);break;case"Avatar":if(C)throw console.error("An Avatar already exists."),new Error("There can only be one Avatar.");C=c.getInstance(e,t,n,r,s),a=C}const o=document.getElementById("avatar-state-section");return o?o.style.display="Avatar"===n?"block":"none":console.error("Avatar state section element not found."),a&&m.displayCharacter(a,"character-display"),a}const I=document.getElementById("move-selects"),W=document.getElementById("character-bending");function L(e){return e.map((e=>k[e]))}function F(e){var t;const n=document.getElementById("offense-moves");n.innerHTML="",(null!==(t=M[e])&&void 0!==t?t:[]).forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)}))}function $(e){var t;const n=document.getElementById("defense-moves");n.innerHTML="",(null!==(t=B[e])&&void 0!==t?t:[]).forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)}))}I&&W&&W.addEventListener("change",(()=>{const e=W.value;["Airbender","Earthbender","Firebender","Waterbender","Avatar"].includes(e)?I.style.display="block":I.style.display="none"})),null===(w=document.getElementById("character-bending"))||void 0===w||w.addEventListener("change",(e=>{const t=e.target.value;x(t),F(t),$(t)})),null===(S=document.getElementById("create-character-btn"))||void 0===S||S.addEventListener("click",(e=>{e.preventDefault(),console.log("Create character button clicked");const t=document.getElementById("character-name"),n=document.getElementById("nation"),r=document.getElementById("character-bending"),s=L([...Array.from(document.getElementById("offense-moves").selectedOptions).map((e=>e.value)),...Array.from(document.getElementById("defense-moves").selectedOptions).map((e=>e.value))]),a=s.filter(f),o=s.filter(v),i=r.value,c=A(t.value,n.value,i,a,o);c?(E.addCharacter(c),console.log("Character created:",c)):console.error("Character creation failed.")})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("character-form"),t=document.getElementById("character-bending"),n=document.getElementById("offense-moves"),r=document.getElementById("defense-moves"),s=new g;if(!(t&&e&&n&&r))return void console.error("One or more required elements are missing from the document.");function a(e){F(e),$(e)}const o=t.value;x(o),a(o),t.addEventListener("change",(e=>{const t=e.target.value;x(t),a(t)})),e.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("character-name").value,a=document.getElementById("nation").value,o=document.getElementById("character-bending").value,i=Array.from(n.selectedOptions).map((e=>e.value)),c=Array.from(r.selectedOptions).map((e=>e.value)),d=A(t,a,o,L(i),L(c));d?(console.log("Character created successfully:",d),s.addCharacter(d),console.log("Character created:",d)):console.error("Character creation failed.")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("character-bending");if(!e)return void console.error("Character Bending select element not found");const t=e.value;x(t),F(t),$(t),e.addEventListener("change",(e=>{const t=e.target.value;x(t),F(t),$(t)}))}))})();